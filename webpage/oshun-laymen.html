<!DOCTYPE html>
<html>

<head>
	<title>Oshun</title>
	<style>
		body {
			font-family: Tahoma, Verdana, Arial, sans-serif;

		}

		h1 {
			width: 1190px;
			height: 70px;
			font-weight: 600;
			font-family: 'Titillium Web', sans-serif;
			font-size: 36px;
			line-height: 40px;
			padding: 15px 15px 15px 15px;
			color: #355681;
		}

		.circle-progress-value {
			stroke-width: 6px;
			stroke: hsl(39, 100%, 50%);
		}

		.circle-progress-circle {
			stroke-width: 6px;
			stroke: hsl(39, 100%, 85%);
		}

		.circle-progress-text {
			fill: hsl(39, 100%, 50%);
		}

		.progressContainer {
			display: flex;
			/* or inline-flex */
			flex-direction: column;
		}
	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="jquery.circle-progress.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/dygraph/2.1.0/dygraph.min.js"></script>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/dygraph/2.1.0/dygraph.min.css" />
</head>

<body>
	<center>
	<h1>Oshun Smart Bottle</h1>
	<h2>Oshun smart water bottle's water quality results</h2>
	<h3>Sampling Frequency <span id="fs">00</span> Hz</h3>

	<div class="progressContainer">
		<div class="progress" id="progV" >
		</div>
		<div class="progress" id="progPH" ></div>
		<div class="progress" id="progTB" ></div>
		<div class="progress" id="progTP" ></div>
	</div>
	<h3>Drinkable = <span id="drinkable">NA</span></h3>

</center>

	<table style="display: none;">
		<tr>
			<th>
				<div id="div_g" style="width:0px; height:0px;display: none;"></div>
				
				<script type="text/javascript">

					// max samples for dygraph
					var maxSamples = 60;

					// relative path to the sensor data for get/post:
					var serverPath = "/sensor/:80";

					// callback when the Web page has been loaded
					$(document).ready(function () {
						var data = [];
						var g = new Dygraph(document.getElementById("div_g"), data,
							{
								labels: ['Time', 'Volume'],
							});


						window.intervalId = setInterval(function () {
							// callback for interval timer for every second
							$.getJSON(serverPath, function (result) {
								data = [];
								var dt = 1.0 / result.fs;
								var t = 0;
								var tp = 0;
								$('#progV').show();
								document.getElementById("fs").innerHTML = result.fs;
								document.getElementById("drinkable").innerHTML = result.drinkable;
								//document.getElementById("detected").innerHTML = result.waterDetected;
								for (let i = 0; i < result.volumeValues.length; i++) {
									var y = result.volumeValues[i];
									data.push([t, y]);
									t = t + dt;
									tp = tp+ 1;
								}
								$('#progV').circleProgress({
										max: 29,
										value: tp,
										textFormat: 'percent',
									});
								document.getElementById("fs").innerHTML = tp;

								g.updateOptions({ 'file': data });
							});
						}, 1000);
					});
				</script>
			</th>
			<th>
				<div id="div_h" style="width:0px; height:0px;" style="display: none;"></div>

				<script type="text/javascript">
					// max samples for dygraph
					var maxSamples = 60;

					// relative path to the sensor data for get/post:
					var serverPath = "/sensor/:80";

					// callback when the Web page has been loaded
					$(document).ready(function () {
						var data = [];
						var g = new Dygraph(document.getElementById("div_h"), data,
							{
								labels: ['Time', 'pH'],
							});

						window.intervalId = setInterval(function () {
							// callback for interval timer for every second
							$.getJSON(serverPath, function (result) {
								data = [];
								var dt = 1.0 / result.fs;
								var t = 0;
								var tp = 0;
								$('#progPH').show();
								document.getElementById("drinkable").innerHTML = result.drinkable;
								//document.getElementById("phType").innerHTML = result.phType;
								for (let i = 0; i < result.phValues.length; i++) {
									var y = result.phValues[i];
									data.push([t, y]);
									t = t + dt;
									tp = tp+ 1;
								}
								$('#progPH').circleProgress({
										max: 29,
										value: tp,
										textFormat: 'percent',
									});
								g.updateOptions({ 'file': data });
							});
						}, 1000);
					});
				</script>
			</th>
		</tr>
		<tr>
			<th>
				<div id="div_p" style="width:0px; height:0px;display: none;"></div>
				<script type="text/javascript">
					// max samples for dygraph
					var maxSamples = 60;

					// relative path to the sensor data for get/post:
					var serverPath = "/sensor/:80";

					// callback when the Web page has been loaded
					$(document).ready(function () {
						var data = [];
						var g = new Dygraph(document.getElementById("div_p"), data,
							{
								labels: ['Time', 'Turbidity'],
							});
							$('#progTB').show();
						window.intervalId = setInterval(function () {
							// callback for interval timer for every second
							$.getJSON(serverPath, function (result) {
								data = [];
								var dt = 1.0 / result.fs;
								var t = 0;
								var tp = 0;
								document.getElementById("drinkable").innerHTML = result.drinkable;
								//document.getElementById("tbType").innerHTML = result.turbidityType;
								for (let i = 0; i < result.turbidityValues.length; i++) {
									var y = result.turbidityValues[i];
									data.push([t, y]);
									t = t + dt;
									tp = tp+1;
								}
								$('#progTB').circleProgress({
										max: 29,
										value: tp,
										textFormat: 'percent',
									});
								g.updateOptions({ 'file': data });
							});
						}, 1000);
					});
				</script>
			</th>
			<th>
				<div id="div_ph" style="width:0px; height:0px;display: none;"></div>

				<script type="text/javascript">
					// max samples for dygraph
					var maxSamples = 60;

					// relative path to the sensor data for get/post:
					var serverPath = "/sensor/:80";

					// callback when the Web page has been loaded
					$(document).ready(function () {
						var data = [];
						var g = new Dygraph(document.getElementById("div_ph"), data,
							{
								labels: ['Time', 'Temperature'],
							});

						window.intervalId = setInterval(function () {
							// callback for interval timer for every second
							$.getJSON(serverPath, function (result) {
								data = [];
								var dt = 1.0 / result.fs;
								var t = 0;
								var tp = 0;
								document.getElementById("drinkable").innerHTML = result.drinkable;
								//document.getElementById("tpType").innerHTML = result.temperatureType;
								$('#progTP').show();
								for (let i = 0; i < result.temperatureValues.length; i++) {
									var y = result.temperatureValues[i];
									data.push([t, y]);
									t = t + dt;
									tp = tp+1;
								}
								$('#progTP').circleProgress({
										max: 29,
										value: tp,
										textFormat: 'percent',
									});
								g.updateOptions({ 'file': data });
							});
						}, 1000);
					});
				</script>

			</th>
		</tr>
	</table>


</body>

</html>