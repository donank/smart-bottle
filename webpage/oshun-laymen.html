<!DOCTYPE html>
<html>

<head>
	<title>Oshun-Analysis</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<style>
		body {

			font-family: "Lato", sans-serif;
			background-color: #F8F8FF;
		}

		h1 {
			font-family: 'Titillium Web', sans-serif;
			font-size: 36px;
			color: #082081
		}

		.sidebar {
			height: 100%;
			width: 0;
			position: fixed;
			z-index: 1;
			top: 0;
			left: 0;
			background-color: #111;
			overflow-x: hidden;
			transition: 0.5s;
			padding-top: 60px;
		}

		.sidebar a {
			padding: 8px 8px 8px 32px;
			text-decoration: none;
			font-size: 25px;
			color: #818181;
			display: block;
			transition: 0.3s;
		}

		.sidebar a:hover {
			color: #f1f1f1;
		}

		.sidebar .closebtn {
			position: absolute;
			top: 0;
			right: 25px;
			font-size: 36px;
			margin-left: 50px;
		}

		.openbtn {
			width: 100%;
			font-size: 20px;
			cursor: pointer;
			color: black;
			padding: 14px 15px;
			border: none;
			text-align: left;
		}

		#main {
			transition: margin-left .5s;
			padding: 16px;
		}

		@media screen and (max-height: 450px) {
			.sidebar {
				padding-top: 15px;
			}

			.sidebar a {
				font-size: 18px;
			}
		}

		.progressContainer {
			margin-top: 10px;
			display: grid;
			grid-template-rows: auto auto auto auto;
			grid-row-gap: 10px;
			align-content: start;

		}

		.progContainer {
			height: 160px;
			color: white;
			background-color: #393456;
			border-radius: 6px;
			display: grid;
			grid-template-columns: 160px auto;
			align-content: center;
		}

		.progValContainer {
			position: relative;

			padding: 0;
		}

		.progVal {
			position: absolute;
			top: 50%;
			left: 30%;
			transform: translate(-50%, -50%);
			display: flex;
			flex-direction: row;
			gap: 10px;
		}

		.progVal1 {
			position: absolute;
			top: 50%;
			left: 35%;
			transform: translate(-50%, -50%);
		}

		.progress {
			margin-left: 10px;
		}

		.circle-progress {
			width: 120px;
			height: auto;
		}

		.circle-progress-value {
			stroke-width: 10px;
			stroke: white;
		}

		.circle-progress-circle {
			stroke-width: 10px;
			stroke: white;
		}

		.circle-progress-text {
			fill: white;
		}
	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="jquery.circle-progress.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/dygraph/2.1.0/dygraph.min.js"></script>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/dygraph/2.1.0/dygraph.min.css" />
</head>

<body>
	<div id="mySidebar" class="sidebar">
		<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">x</a>
		<a href="https://github.com/donank/smart-bottle">About</a>
		<a href="http://192.168.1.21/oshun.html">Debug</a>
		<a href="#">Contact</a>
	</div>

	<div id="main">
		<button class="openbtn" onclick="openNav()">&#9776; Analysis</button>
		<div class="progressContainer">
			<div class="progContainer">
				<div class="progress" id="progV">
				</div>
				<div class="progValContainer">
					<svg style="position:absolute;top:-5;right:10;" xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 448 512" width="32px" height="32px">
						<path fill="white"
							d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z" />
					</svg>
					<div class="progVal1">
						<h3><span id="detectedVLabel">Detecting Water Solution</span></h3>
					</div>
				</div>
			</div>
			<div class="progContainer">
				<div class="progress" id="progPH">
				</div>
				<div class="progValContainer">
					<svg style="position:absolute;top:-5;right:10;" xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 448 512" width="32px" height="32px">
						<path fill="white"
							d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z" />
					</svg>
					<div class="progVal">
						<h3><span id="finalPH">0.00</span></h3>
						<h3><span id="detectedPHLabel">pH</span></h3>
					</div>
				</div>
			</div>
			<div class="progContainer">
				<div class="progress" id="progTB">
				</div>
				<div class="progValContainer">
					<svg style="position:absolute;top:-5;right:10;" xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 448 512" width="32px" height="32px">
						<path fill="white"
							d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z" />
					</svg>
					<div class="progVal">
						<h3><span id="finalTB">0.00</span></h3>
						<h3><span id="detectedTBLabel">NTU</span></h3>
					</div>
				</div>
			</div>
			<div class="progContainer">
				<div class="progress" id="progTP">
				</div>
				<div class="progValContainer">
					<svg style="position:absolute;top:-5;right:10;" xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 448 512" width="32px" height="32px">
						<path fill="white"
							d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z" />
					</svg>
					<div class="progVal">
						<h3><span id="finalTP">0.00</span></h3>
						<h3><span id="detectedTPLabel">&#8451;</span></h3>
					</div>
				</div>
			</div>
		</div>
	</div>


	</div>
	<script>
		function openNav() {
			document.getElementById("mySidebar").style.width = "250px";
			document.getElementById("main").style.marginLeft = "250px";
		}

		function closeNav() {
			document.getElementById("mySidebar").style.width = "0";
			document.getElementById("main").style.marginLeft = "0";
		}
	</script>
	<table style="display: none;">
		<tr>
			<th>
				<div id="div_g" style="width:0px; height:0px;display: none;"></div>

				<script type="text/javascript">
					$('.progress').circleProgress({
						max: 29,
						value: 0,
						textFormat: 'percent',
					});
					// max samples for dygraph
					var maxSamples = 60;

					// relative path to the sensor data for get/post:
					var serverPath = "/sensor/:80";

					// callback when the Web page has been loaded
					$(document).ready(function () {
						var data = [];
						var g = new Dygraph(document.getElementById("div_g"), data,
							{
								labels: ['Time', 'Volume'],
							});


						window.intervalId = setInterval(function () {
							// callback for interval timer for every second
							$.getJSON(serverPath, function (result) {
								data = [];
								var dt = 1.0 / result.fs;
								var t = 0;
								var tp = 0;

								//document.getElementById("fs").innerHTML = result.fs;
								//document.getElementById("drinkable").innerHTML = result.drinkable;
								if (result.waterDetected == 0) {
									//document.getElementById("detected").innerHTML = "Water detected! Commencing Testing.";
								}

								for (let i = 0; i < result.volumeValues.length; i++) {
									var y = result.volumeValues[i];
									data.push([t, y]);
									t = t + dt;
									tp = tp + 1;
								}
								$('#progV').circleProgress({
									max: 29,
									value: tp,
									textFormat: 'percent',
								});
								document.getElementById("fs").innerHTML = tp;

								g.updateOptions({ 'file': data });
							});
						}, 1000);
					});
				</script>
			</th>
			<th>
				<div id="div_h" style="width:0px; height:0px;" style="display: none;"></div>

				<script type="text/javascript">
					// max samples for dygraph
					var maxSamples = 60;

					// relative path to the sensor data for get/post:
					var serverPath = "/sensor/:80";

					// callback when the Web page has been loaded
					$(document).ready(function () {
						var data = [];
						var g = new Dygraph(document.getElementById("div_h"), data,
							{
								labels: ['Time', 'pH'],
							});

						window.intervalId = setInterval(function () {
							// callback for interval timer for every second
							$.getJSON(serverPath, function (result) {
								data = [];
								var dt = 1.0 / result.fs;
								var t = 0;
								var tp = 0;
								//document.getElementById("drinkable").innerHTML = result.drinkable;

								for (let i = 0; i < result.phValues.length; i++) {
									var y = result.phValues[i];
									data.push([t, y]);
									t = t + dt;
									tp = tp + 1;
									document.getElementById("finalPH").innerHTML = y.toFixed(3);
								}
								if (tp > 1) {


								}
								$('#progPH').circleProgress({
									max: 29,
									value: tp,
									textFormat: 'percent',
								});
								g.updateOptions({ 'file': data });
							});
						}, 1000);
					});
				</script>
			</th>
		</tr>
		<tr>
			<th>
				<div id="div_p" style="width:0px; height:0px;display: none;"></div>
				<script type="text/javascript">
					// max samples for dygraph
					var maxSamples = 60;

					// relative path to the sensor data for get/post:
					var serverPath = "/sensor/:80";

					// callback when the Web page has been loaded
					$(document).ready(function () {
						var data = [];
						var g = new Dygraph(document.getElementById("div_p"), data,
							{
								labels: ['Time', 'Turbidity'],
							});
						window.intervalId = setInterval(function () {
							// callback for interval timer for every second
							$.getJSON(serverPath, function (result) {
								data = [];
								var dt = 1.0 / result.fs;
								var t = 0;
								var tp = 0;
								//document.getElementById("drinkable").innerHTML = result.drinkable;
								//document.getElementById("detectedTBLabel").innerHTML = "Evaluating Turbidity...";
								for (let i = 0; i < result.turbidityValues.length; i++) {
									var y = result.turbidityValues[i];
									data.push([t, y]);
									t = t + dt;
									tp = tp + 1;
									document.getElementById("finalTB").innerHTML = y.toFixed(3);
								}
								$('#progTB').circleProgress({
									max: 29,
									value: tp,
									textFormat: 'percent',
								});
								g.updateOptions({ 'file': data });
							});
						}, 1000);
					});
				</script>
			</th>
			<th>
				<div id="div_ph" style="width:0px; height:0px;display: none;"></div>

				<script type="text/javascript">
					// max samples for dygraph
					var maxSamples = 60;

					// relative path to the sensor data for get/post:
					var serverPath = "/sensor/:80";

					// callback when the Web page has been loaded
					$(document).ready(function () {
						var data = [];
						var g = new Dygraph(document.getElementById("div_ph"), data,
							{
								labels: ['Time', 'Temperature'],
							});

						window.intervalId = setInterval(function () {
							// callback for interval timer for every second
							$.getJSON(serverPath, function (result) {
								data = [];
								var dt = 1.0 / result.fs;
								var t = 0;
								var tp = 0;
								//document.getElementById("drinkable").innerHTML = result.drinkable;
								//document.getElementById("detectedTPLabel").innerHTML = "Evaluating Temperature...";
								for (let i = 0; i < result.temperatureValues.length; i++) {
									var y = result.temperatureValues[i];
									data.push([t, y]);
									t = t + dt;
									tp = tp + 1;
									document.getElementById("finalTP").innerHTML = y.toFixed(3);
								}
								$('#progTP').circleProgress({
									max: 29,
									value: tp,
									textFormat: 'percent',
								});
								g.updateOptions({ 'file': data });
							});
						}, 1000);
					});
				</script>

			</th>
		</tr>
	</table>
</body>

</html>